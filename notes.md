File: `ucbpcap_status.pcapng`

# 90

code: 4F
out: ~2000464F0000FD9A
in:  ~2000-46-00-0000-FDB4 (zero size)

# 114

note: some vendor model/name
code: 51
out: ~200046510000FDAE
in:
 - ~20004600C
 - 040313130312D5A413131201004434
 - 14E3A504E475F4459455F4C7578705F
 - 544242F02E
in:
 ~2000-46-00-C-040-313130312D5A41313120100443414E3A504E475F4459455F4C7578705F544242-F02E
                   1101-ZA11 \x10\x04CAN:PNG_DYE_Luxp_TBB
# 126

note: get-status
code: 42
time: 72.9
out: ~20004642E00200FD37
out: ~20-00-46-42-E-002-00-FD37
in:
 - ~2000460
 - 010960000100D010D020D010D010D00
 - 0D000CFF0D000D010D020D020D010D
 - 000D020D000D00060B1E0B140B110B2
 - 10B450B20000014CE1D0C0A3E8001D0
 - 3E80000103E814CEFFFBFFFD0067000
 - BDD9C

# 144

note: get-signal
code: 44
out: ~20004644E00200FD35
in:
 - ~200046008062
 - 0000100000000000000000000000000
 - 0000000060000000000000000140000
 - 0000000003000010000000000000000
 - 00010EB33

 - ~2000-46-00-8-062-0000-10-00/00/00/00/00/00/00/00/00/00/00/00/00/00/00/00-06-00/00/00/00/00/00-00/00-14-(0000000000000300001000000000000000000010)-EB33

# 284 - 300

code: 42,44
time: 74.14

# 438 - 454

code: 42,44
time: 75.3

# 592 - 608

code: 42, 44
time: 76.5

# 750

code: 42
time: 77.7

File `ucbpcap_params_x2.pcapng`

# 70

code: 4F
time: 16.2

# 90

code: 51
time: 16.41

# 102 + 118

code: 42,44
time: 16.48

# 256 + 272

code: 42, 44
time: 17.68

# 352 (to 380)

note: get-settings
code: 47
time: 18.42

in: ~20004647E00200FD32
out:
- ~20004600815
- 2003C0DAC0D480B540C1C0E420D480
- A8C0C1C0D4805DC15E01518122012C0
- 1680151810E012C0189C17D40C9F0C8
- 10ABF0ADD0CD10C9F0A470AAB0CB30C
- 810A470AC90CD10C9F0A150AAB0AAB
- 0B0F0C9F0C810AAB0AC90D030CD10A4
- 70AAB0E2F0DFD0E930DFD3A9838A4C3
- 74C43C3E80C1808AD007D03E801D4C
- 1B321E1E140A100A0A1E3C0505010A0
- A1EF0300F0560506409000D0008FFFF
- FF3FBF9FAF1E313130312D5A4131312
- 0B2BE

# 3408 (to 3436)

time: 42.23
code: 47
in: ~20004647E00200FD32

# 6102 (to 6130)

time: 103.39
code: 47

# 7826

note: set-settings
code: A1
time: 116.79-117.16
in: ~200046A18152003C0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D042681D4C1B321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D0008FFFFFF3FBF9FAF1E313130312D5A41313120B2B8
out: ~200046000000FDB4

note: vendor model/name (not changed)
in: ~200046510000FDAE
out:
- ~20004600C040313130312D5A4131
- 3120100443414E3A504E475F445945
- 5F4C7578705F544242F02E

- 313130312D5A41313120100443414E3A504E475F4459455F4C7578705F544242

# 8512

code: A1
time: 122.12-122.48

in: ~200046A18152003C0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D03E801D4C1B321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D0008FFFFFF3FBF9FAF1E313130312D5A41313120B2AC
out: ~200046000000FDB4


# generated

0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D401F401D600140032022601F4-0640000020801D6-064001E022601F4-09600000000006401F401D60000001E02580226-06400000384035203E803523A9838A4-3C8C-3BC43E80-3E80-753007D03A981D4C321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D46CA26C846AC26AE06CD46CA26A4A6AAE6CB66C846A4A6ACC6CD46CA26A186AAE6AAE6B126CA26C846AAE6ACC6D066CD46A4A6AAE6E326E006E966E003A9838A4-3C8C-3BC43E80-3E80-753007D03A981D4C321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4-3C8C-3BC43E80-3E80-753007D03A981D4C321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D03A981D4C321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D03E801D4C1B321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

3C0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D03E801D4C1B321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D00

3C0DAC0D480B540C1C0E420D480A8C0C1C0D4805DC15E01518122012C01680151810E012C0189C17D40C9F0C810ABF0ADD0CD10C9F0A470AAB0CB30C810A470AC90CD10C9F0A150AAB0AAB0B0F0C9F0C810AAB0AC90D030CD10A470AAB0E2F0DFD0E930DFD3A9838A4C374C43C3E80C1808AD007D03E801D4C1B321E1E140A100A0A1E3C0505010A0A1EF0300F0560506409000D0008FFFFFF3FBF9FAF0E

# Plan

+ get protocol pdfs
  - https://github.com/syssi/esphome-seplos-bms
+ enable loading settings to xml
+ enable storing settings from xml
- enable signal (44) querying

# from Doc

## cmds

- 42 - telemetry information
- 44 - remoe information
- 45 - remote command
- 47 - telemetry information
- 49 - set remote adj info
- 4F - comm protocol version
- 51 - device details
- 4B - historical data
- 4D - get time
- 4E - sync time
- A0 - production calibration
- A1 - production settings
- A2 - timed recording

## error codes

- 00H  Normal
- 01H  VER Abnormal
- 02H  CHKSUM Abnormal
- 03H  LCHKSUM Abnormal
- 04H  Invalid CID2 code
- 05H  Invalid command
- 06H  Invalid data
- 07H  No data (Historical record)
- E1H  Invalid CID1 code
- E2H  Command execution failed
- E3H  Equipment failure
- E4H  Invalid permission

# Observations

- [??] warnHistory
  - 15 bytes with flags
  - 16x2b cells
  - 6x2b temps
  - 9x2b other fields
- [42] status reply is actually described by `teleMeter_Group`
  - group for cells
  - group for temps
  - group for other
- [??] adjust_para_group
  - Current Calibration -25A -- check <-> signed hack
  - try to calibrate and get code
- [??] teleControl_Group -- 2 bytes with ctrl (6 flags): charging enabled etc
- [44] teleSignal_Group -- signals (warnings/infos etc)
  - for each cell (protect)
  - for each temp (protect)
  - curr+voltage (protect)
  - a lot of flags (~75)
  - 2 more bytes for state (charging/discharging/standby/etc)
